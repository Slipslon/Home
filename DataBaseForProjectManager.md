## База данных для менеджера проекта

В процессе работы в команде проекта (строительная компания) я пришел к такой задаче: 

> Необходимо создать удобный отчет, или серию отчетов для команды проекта, которая бы отражала данные по раду разделов (перечень разделов здесь не имеет значение для примера это Накопительная, Объемы в промежуточных КС, объемы в РД/ИД и другие).

Эту задачу можно было решить с помощью стандартного функционала Excel, но я решил что базы данных надежнее. В дальнейшем, данными в базе легче манипулировать.

В добавок из за специфики данных появилась проблема сортировки данных. Так как все даные привязаны к сметным позициям, я решил что номер сметной позиции будет основным первичным ключем. Структура сметных позиций иерархическая
>1.1
>
>1.2
>
>2.2.1
>
>5.10.165
>
>и т.д.

Можно было бы просто создать поле (столбец) ID с типом счетчик, или просто целочисленными значениями. Но в процессе изменения сметы, новые сметные позиции добавлялись в середину разделов.
Таким образом появилась необходимость сохранить иерархичность сметных позиций. 

Для этого отлично подошел тип данных `hierarhyid` в MS SQL, либо его аналог в Postgres надстройка `ltree`. 
Я выбрал MS SQL.

## Модель Базы данных
Физическая модель

![Test](/Diagram.PNG)

[Запрос на создание модели базы данных.](/CreateModel.sql)

## Основное представление 
Для создания отчета я сделал несколько представлений с нужными полями (столбцами).

- [Основное представление](/Основное_представление.sql)

- [Представление по КС](/CreateModel.sql)

- [Представление по COR](/CreateModel.sql)

- [Представление по ИД/РД](/CreateModel.sql)

- [Представление по Заявкам](/CreateModel.sql)

